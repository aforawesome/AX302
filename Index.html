<!DOCTYPE html>
<html>
<head>
	<title>Phaser Game</title>
	<script type="text/javascript" src = "phaser.min.js" src = "app.js"></script>
</head>
<body>
<script type="text/javascript" >
var game = new Phaser.Game(800,600,Phaser.AUTO,'',{preload:preload, create:create, update:update});
var score = 0;
var life = 1;
function preload(){
	game.load.image('sky', 'assest/sky.png');
	game.load.image('ground','assests/platform.png');
	game.load.image('star', 'assests/star.png')
	game.load.spritesheet('dude', 'assest/dude.png',32,48);
	game.load.spritesheet('baddie', 'assest/]baddie.png',32,48)
}
function create(){
	game.physics.startSystem(Phaser.Physics.ARCADE);
	game.add.sprite(0,0,'sky');
	platforms = game.add.physicsGroup();
	platforms.enableBody = true;
	var ground = platform.create(0,550,'ground');
	gorund.body.immovable = true;
	var ledge = platforms.create(400,400,'ground')
	ledge.body.body.immovable = true;
	ledge.body.immovable = true;
	var style = {font: ""}"bold 32px Arial", fill "#fff"}
	lifelabel = game.add.text(10,5,"Score: ", style);
	scoretext = game.add.text(420,560,life,style);

	lifelabel = game.add.text(10,5, "Life: ", style);
	lifetext = game.add.text(120,5,life,style);
	player.animation.add('left', [0,1,2,3], 10, true);
	player.animation.add('right', [5,6,7,8], 10, true);
	game.physics.arcade.enable(player);
	player.body.bounce.y = 0.2;
	player.body.gravity.y = 300;
	player.body.collideWorldBounds = true;
	enemy1 = game.add.sprite(760, 20, 'baddie');
	enemy1.animations.add('left',[0,1],10, true);
	enemy1.animations.add('right',[2,3], 10, true)
	game.physics.arcade.enable(enemy1);
	enemy1.body.bounce.y = 0,2;
	enemy1.body.gravity.y = 500;
	enemy1.body.collideWorldBounds = true;
	stars = game.add.physicsGroup();
	stars.enableBody = true;
	for(var i = 0; i<12; i++){
		var stars = stars.create(i*70, 0 ,'star');
		star.body.gravity.y =200;
		star.body,bounce.y = 0.7 + Math.random() + 0,2
	}
}
function update(){
	game.physics.arcade.collide(player. platforms);
	game.physics.arcade.collide(star, platforms);
	game.physics.arcade.collide(enemy1, platforms);

	player.body.velocity.x = 0;
	if(cursor.left.isDown){
		player.body.velocity.x = -150;
		player.animations.play('left')

	}
	else if(cursors.right.isDown){
		player.body.veloctity.x = 150
		player.animations.play('right')
	}
	else {
		player.animations.stop();
		player.frame = 4;
	}
	if(cursors.up.isDown && player.body.touching_down)
		player.body.velocity.y = -300;
}
game.physics.arcade.overlap(player, stars, collectStar;
game.physics.arcade.overlap(player, enemy1, loseLife);
moveEnemy();
if(life<0){
	endGame();
}
}
function collectStar(player, star){
	score = score + 1;
	scoretext.setText(score);
	star.kill();
	star.reset(Math.floor(Math.random()*750), 0);
}
function moveEnemy(){
	if(enemy1.x > 759){
		enemy1.animations.play('right');
		enemy1.body.veloctiy.x= 120;
	}
	function endGame(){
		player.kill();
		scorelabel.text = "Game over!!! You scored" + score;
	}
}
}

</script>
</body>
</html>